#!/usr/bin/env node
"use strict";(()=>{var cr=Object.create;var pe=Object.defineProperty;var lr=Object.getOwnPropertyDescriptor;var ur=Object.getOwnPropertyNames;var pr=Object.getPrototypeOf,dr=Object.prototype.hasOwnProperty;var P=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var M=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var fr=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of ur(r))!dr.call(e,n)&&n!==t&&pe(e,n,{get:()=>r[n],enumerable:!(o=lr(r,n))||o.enumerable});return e};var L=(e,r,t)=>(t=e!=null?cr(pr(e)):{},fr(r||!e||!e.__esModule?pe(t,"default",{value:e,enumerable:!0}):t,e));var Y=M((Ln,_e)=>{"use strict";var mr=Object.create,J=Object.defineProperty,hr=Object.getOwnPropertyDescriptor,gr=Object.getOwnPropertyNames,_r=Object.getPrototypeOf,vr=Object.prototype.hasOwnProperty,yr=(e,r)=>{for(var t in r)J(e,t,{get:r[t],enumerable:!0})},de=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of gr(r))!vr.call(e,n)&&n!==t&&J(e,n,{get:()=>r[n],enumerable:!(o=hr(r,n))||o.enumerable});return e},fe=(e,r,t)=>(t=e!=null?mr(_r(e)):{},de(r||!e||!e.__esModule?J(t,"default",{value:e,enumerable:!0}):t,e)),br=e=>de(J({},"__esModule",{value:!0}),e),me={};yr(me,{LineStream:()=>T,byline:()=>wr,createLineStream:()=>ge,createStream:()=>he});_e.exports=br(me);var W=fe(P("stream")),Er=fe(P("util"));function wr(e,r){return he(e,r)}function he(e,r){return e?ge(e,r):new T(r)}function ge(e,r){if(!e)throw new Error("expected readStream");if(!e.readable)throw new Error("readStream must be readable");let t=new T(r);return e.pipe(t),t}function T(e){W.default.Transform.call(this,e),e=e||{},this._readableState.objectMode=!0,this._lineBuffer=[],this._keepEmptyLines=e.keepEmptyLines||!1,this._lastChunkEndedWithCR=!1,this.on("pipe",function(r){this.encoding||r instanceof W.default.Readable&&(this.encoding=r._readableState.encoding)})}Er.default.inherits(T,W.default.Transform);T.prototype._transform=function(e,r,t){r=r||"utf8",Buffer.isBuffer(e)&&(r=="buffer"?(e=e.toString(),r="utf8"):e=e.toString(r)),this._chunkEncoding=r;let o=e.split(/\r\n|\r|\n/g);this._lastChunkEndedWithCR&&e[0]==`
`&&o.shift(),this._lineBuffer.length>0&&(this._lineBuffer[this._lineBuffer.length-1]+=o[0],o.shift()),this._lastChunkEndedWithCR=e[e.length-1]=="\r",this._lineBuffer=this._lineBuffer.concat(o),this._pushBuffer(r,1,t)};T.prototype._pushBuffer=function(e,r,t){for(;this._lineBuffer.length>r;){let o=this._lineBuffer.shift();if((this._keepEmptyLines||o.length>0)&&!this.push(this._reencode(o,e))){let n=this;setImmediate(function(){n._pushBuffer(e,r,t)});return}}t()};T.prototype._flush=function(e){this._pushBuffer(this._chunkEncoding,0,e)};T.prototype._reencode=function(e,r){return this.encoding&&this.encoding!=r?Buffer.from(e,r).toString(this.encoding):this.encoding?e:Buffer.from(e,r)}});var z=M((qn,ye)=>{"use strict";var H=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,xr=Object.getOwnPropertyNames,Sr=Object.prototype.hasOwnProperty,Pr=(e,r)=>{for(var t in r)H(e,t,{get:r[t],enumerable:!0})},jr=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of xr(r))!Sr.call(e,n)&&n!==t&&H(e,n,{get:()=>r[n],enumerable:!(o=Or(r,n))||o.enumerable});return e},Dr=e=>jr(H({},"__esModule",{value:!0}),e),ve={};Pr(ve,{isErrorResponse:()=>Nr});ye.exports=Dr(ve);function Nr(e){return e.error!==void 0}});var Q=M((An,Oe)=>{"use strict";var X=Object.defineProperty,$r=Object.getOwnPropertyDescriptor,Cr=Object.getOwnPropertyNames,Mr=Object.prototype.hasOwnProperty,kr=(e,r)=>{for(var t in r)X(e,t,{get:r[t],enumerable:!0})},Tr=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Cr(r))!Mr.call(e,n)&&n!==t&&X(e,n,{get:()=>r[n],enumerable:!(o=$r(r,n))||o.enumerable});return e},Rr=e=>Tr(X({},"__esModule",{value:!0}),e),be={};kr(be,{__commonJS:()=>Fr,__require:()=>Br,__toESM:()=>Vr});Oe.exports=Rr(be);var Ir=Object.create,Ee=Object.defineProperty,Lr=Object.getOwnPropertyDescriptor,we=Object.getOwnPropertyNames,qr=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty,Br=(e=>typeof P<"u"?P:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof P<"u"?P:r)[t]}):e)(function(e){if(typeof P<"u")return P.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Fr=(e,r)=>function(){return r||(0,e[we(e)[0]])((r={exports:{}}).exports,r),r.exports},Gr=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of we(r))!Ar.call(e,n)&&n!==t&&Ee(e,n,{get:()=>r[n],enumerable:!(o=Lr(r,n))||o.enumerable});return e},Vr=(e,r,t)=>(t=e!=null?Ir(qr(e)):{},Gr(r||!e||!e.__esModule?Ee(t,"default",{value:e,enumerable:!0}):t,e))});var Ie=M((Fn,Re)=>{"use strict";var te=Object.defineProperty,Jr=Object.getOwnPropertyDescriptor,Yr=Object.getOwnPropertyNames,Kr=Object.prototype.hasOwnProperty,Pe=(e,r)=>{for(var t in r)te(e,t,{get:r[t],enumerable:!0})},Ur=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Yr(r))!Kr.call(e,n)&&n!==t&&te(e,n,{get:()=>r[n],enumerable:!(o=Jr(r,n))||o.enumerable});return e},Wr=e=>Ur(te({},"__esModule",{value:!0}),e),je={};Pe(je,{Debug:()=>Te,clearLogs:()=>St,default:()=>Pt,getLogs:()=>xt});Re.exports=Wr(je);var Z={};Pe(Z,{$:()=>Me,bgBlack:()=>dt,bgBlue:()=>gt,bgCyan:()=>vt,bgGreen:()=>mt,bgMagenta:()=>_t,bgRed:()=>ft,bgWhite:()=>yt,bgYellow:()=>ht,black:()=>tt,blue:()=>it,bold:()=>ke,cyan:()=>ct,dim:()=>zr,gray:()=>ut,green:()=>ot,grey:()=>pt,hidden:()=>et,inverse:()=>Zr,italic:()=>Xr,magenta:()=>at,red:()=>nt,reset:()=>Hr,strikethrough:()=>rt,underline:()=>Qr,white:()=>lt,yellow:()=>st});var ee,De,Ne,$e,Ce=!0;typeof process<"u"&&({FORCE_COLOR:ee,NODE_DISABLE_COLORS:De,NO_COLOR:Ne,TERM:$e}=process.env||{},Ce=process.stdout&&process.stdout.isTTY);var Me={enabled:!De&&Ne==null&&$e!=="dumb"&&(ee!=null&&ee!=="0"||Ce)};function y(e,r){let t=new RegExp(`\\x1b\\[${r}m`,"g"),o=`\x1B[${e}m`,n=`\x1B[${r}m`;return function(i){return!Me.enabled||i==null?i:o+(~(""+i).indexOf(n)?i.replace(t,n+o):i)+n}}var Hr=y(0,0),ke=y(1,22),zr=y(2,22),Xr=y(3,23),Qr=y(4,24),Zr=y(7,27),et=y(8,28),rt=y(9,29),tt=y(30,39),nt=y(31,39),ot=y(32,39),st=y(33,39),it=y(34,39),at=y(35,39),ct=y(36,39),lt=y(37,39),ut=y(90,39),pt=y(90,39),dt=y(40,49),ft=y(41,49),mt=y(42,49),ht=y(43,49),gt=y(44,49),_t=y(45,49),vt=y(46,49),yt=y(47,49),bt=100,xe=["green","yellow","blue","magenta","cyan","red"],A=[],Se=Date.now(),Et=0,re=typeof process<"u"?process.env:{};globalThis.DEBUG??=re.DEBUG??"";globalThis.DEBUG_COLORS??=re.DEBUG_COLORS?re.DEBUG_COLORS==="true":!0;var B={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let r=globalThis.DEBUG.split(",").map(n=>n.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),t=r.some(n=>n===""||n[0]==="-"?!1:e.match(RegExp(n.split("*").join(".*")+"$"))),o=r.some(n=>n===""||n[0]!=="-"?!1:e.match(RegExp(n.slice(1).split("*").join(".*")+"$")));return t&&!o},log:(...e)=>{let[r,t,...o]=e;(console.warn??console.log)(`${r} ${t}`,...o)},formatters:{}};function wt(e){let r={color:xe[Et++%xe.length],enabled:B.enabled(e),namespace:e,log:B.log,extend:()=>{}},t=(...o)=>{let{enabled:n,namespace:i,color:l,log:s}=r;if(o.length!==0&&A.push([i,...o]),A.length>bt&&A.shift(),B.enabled(i)||n){let c=o.map(a=>typeof a=="string"?a:Ot(a)),u=`+${Date.now()-Se}ms`;Se=Date.now(),globalThis.DEBUG_COLORS?s(Z[l](ke(i)),...c,Z[l](u)):s(i,...c,u)}};return new Proxy(t,{get:(o,n)=>r[n],set:(o,n,i)=>r[n]=i})}var Te=new Proxy(wt,{get:(e,r)=>B[r],set:(e,r,t)=>B[r]=t});function Ot(e,r=2){let t=new Set;return JSON.stringify(e,(o,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return"[Circular *]";t.add(n)}else if(typeof n=="bigint")return n.toString();return n},r)}function xt(e=7500){let r=A.map(([t,...o])=>`${t} ${o.map(n=>typeof n=="string"?n:JSON.stringify(n)).join(" ")}`).join(`
`);return r.length<e?r:r.slice(-e)}function St(){A.length=0}var Pt=Te});var Ve=M((mo,Ge)=>{"use strict";var se=Object.defineProperty,jt=Object.getOwnPropertyDescriptor,Dt=Object.getOwnPropertyNames,Nt=Object.prototype.hasOwnProperty,$t=(e,r)=>{for(var t in r)se(e,t,{get:r[t],enumerable:!0})},Ct=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Dt(r))!Nt.call(e,n)&&n!==t&&se(e,n,{get:()=>r[n],enumerable:!(o=jt(r,n))||o.enumerable});return e},Mt=e=>Ct(se({},"__esModule",{value:!0}),e),Le={};$t(Le,{GeneratorError:()=>F,GeneratorProcess:()=>en});Ge.exports=Mt(Le);var kt=Y(),Tt=z(),w=Q(),Rt=P("child_process"),It=Ie(),Lt=(0,w.__commonJS)({"../../node_modules/.pnpm/isexe@2.0.0/node_modules/isexe/windows.js"(e,r){"use strict";r.exports=i,i.sync=l;var t=(0,w.__require)("fs");function o(s,c){var u=c.pathExt!==void 0?c.pathExt:process.env.PATHEXT;if(!u||(u=u.split(";"),u.indexOf("")!==-1))return!0;for(var a=0;a<u.length;a++){var d=u[a].toLowerCase();if(d&&s.substr(-d.length).toLowerCase()===d)return!0}return!1}function n(s,c,u){return!s.isSymbolicLink()&&!s.isFile()?!1:o(c,u)}function i(s,c,u){t.stat(s,function(a,d){u(a,a?!1:n(d,s,c))})}function l(s,c){return n(t.statSync(s),s,c)}}}),qt=(0,w.__commonJS)({"../../node_modules/.pnpm/isexe@2.0.0/node_modules/isexe/mode.js"(e,r){"use strict";r.exports=o,o.sync=n;var t=(0,w.__require)("fs");function o(s,c,u){t.stat(s,function(a,d){u(a,a?!1:i(d,c))})}function n(s,c){return i(t.statSync(s),c)}function i(s,c){return s.isFile()&&l(s,c)}function l(s,c){var u=s.mode,a=s.uid,d=s.gid,p=c.uid!==void 0?c.uid:process.getuid&&process.getuid(),m=c.gid!==void 0?c.gid:process.getgid&&process.getgid(),f=parseInt("100",8),_=parseInt("010",8),O=parseInt("001",8),D=f|_,N=u&O||u&_&&d===m||u&f&&a===p||u&D&&p===0;return N}}}),At=(0,w.__commonJS)({"../../node_modules/.pnpm/isexe@2.0.0/node_modules/isexe/index.js"(e,r){"use strict";var t=(0,w.__require)("fs"),o;process.platform==="win32"||global.TESTING_WINDOWS?o=Lt():o=qt(),r.exports=n,n.sync=i;function n(l,s,c){if(typeof s=="function"&&(c=s,s={}),!c){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(u,a){n(l,s||{},function(d,p){d?a(d):u(p)})})}o(l,s||{},function(u,a){u&&(u.code==="EACCES"||s&&s.ignoreErrors)&&(u=null,a=!1),c(u,a)})}function i(l,s){try{return o.sync(l,s||{})}catch(c){if(s&&s.ignoreErrors||c.code==="EACCES")return!1;throw c}}}}),Bt=(0,w.__commonJS)({"../../node_modules/.pnpm/which@2.0.2/node_modules/which/which.js"(e,r){"use strict";var t=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",o=(0,w.__require)("path"),n=t?";":":",i=At(),l=a=>Object.assign(new Error(`not found: ${a}`),{code:"ENOENT"}),s=(a,d)=>{let p=d.colon||n,m=a.match(/\//)||t&&a.match(/\\/)?[""]:[...t?[process.cwd()]:[],...(d.path||process.env.PATH||"").split(p)],f=t?d.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",_=t?f.split(p):[""];return t&&a.indexOf(".")!==-1&&_[0]!==""&&_.unshift(""),{pathEnv:m,pathExt:_,pathExtExe:f}},c=(a,d,p)=>{typeof d=="function"&&(p=d,d={}),d||(d={});let{pathEnv:m,pathExt:f,pathExtExe:_}=s(a,d),O=[],D=h=>new Promise((v,E)=>{if(h===m.length)return d.all&&O.length?v(O):E(l(a));let S=m[h],g=/^".*"$/.test(S)?S.slice(1,-1):S,C=o.join(g,a),R=!g&&/^\.[\\\/]/.test(a)?a.slice(0,2)+C:C;v(N(R,h,0))}),N=(h,v,E)=>new Promise((S,g)=>{if(E===f.length)return S(D(v+1));let C=f[E];i(h+C,{pathExt:_},(R,I)=>{if(!R&&I)if(d.all)O.push(h+C);else return S(h+C);return S(N(h,v,E+1))})});return p?D(0).then(h=>p(null,h),p):D(0)},u=(a,d)=>{d=d||{};let{pathEnv:p,pathExt:m,pathExtExe:f}=s(a,d),_=[];for(let O=0;O<p.length;O++){let D=p[O],N=/^".*"$/.test(D)?D.slice(1,-1):D,h=o.join(N,a),v=!N&&/^\.[\\\/]/.test(a)?a.slice(0,2)+h:h;for(let E=0;E<m.length;E++){let S=v+m[E];try{if(i.sync(S,{pathExt:f}))if(d.all)_.push(S);else return S}catch{}}}if(d.all&&_.length)return _;if(d.nothrow)return null;throw l(a)};r.exports=c,c.sync=u}}),Ft=(0,w.__commonJS)({"../../node_modules/.pnpm/path-key@3.1.1/node_modules/path-key/index.js"(e,r){"use strict";var t=(o={})=>{let n=o.env||process.env;return(o.platform||process.platform)!=="win32"?"PATH":Object.keys(n).reverse().find(l=>l.toUpperCase()==="PATH")||"Path"};r.exports=t,r.exports.default=t}}),Gt=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/lib/util/resolveCommand.js"(e,r){"use strict";var t=(0,w.__require)("path"),o=Bt(),n=Ft();function i(s,c){let u=s.options.env||process.env,a=process.cwd(),d=s.options.cwd!=null,p=d&&process.chdir!==void 0&&!process.chdir.disabled;if(p)try{process.chdir(s.options.cwd)}catch{}let m;try{m=o.sync(s.command,{path:u[n({env:u})],pathExt:c?t.delimiter:void 0})}catch{}finally{p&&process.chdir(a)}return m&&(m=t.resolve(d?s.options.cwd:"",m)),m}function l(s){return i(s)||i(s,!0)}r.exports=l}}),Vt=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/lib/util/escape.js"(e,r){"use strict";var t=/([()\][%!^"`<>&|;, *?])/g;function o(i){return i=i.replace(t,"^$1"),i}function n(i,l){return i=`${i}`,i=i.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),i=i.replace(/(?=(\\+?)?)\1$/,"$1$1"),i=`"${i}"`,i=i.replace(t,"^$1"),l&&(i=i.replace(t,"^$1")),i}r.exports.command=o,r.exports.argument=n}}),Jt=(0,w.__commonJS)({"../../node_modules/.pnpm/shebang-regex@3.0.0/node_modules/shebang-regex/index.js"(e,r){"use strict";r.exports=/^#!(.*)/}}),Yt=(0,w.__commonJS)({"../../node_modules/.pnpm/shebang-command@2.0.0/node_modules/shebang-command/index.js"(e,r){"use strict";var t=Jt();r.exports=(o="")=>{let n=o.match(t);if(!n)return null;let[i,l]=n[0].replace(/#! ?/,"").split(" "),s=i.split("/").pop();return s==="env"?l:l?`${s} ${l}`:s}}}),Kt=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/lib/util/readShebang.js"(e,r){"use strict";var t=(0,w.__require)("fs"),o=Yt();function n(i){let s=Buffer.alloc(150),c;try{c=t.openSync(i,"r"),t.readSync(c,s,0,150,0),t.closeSync(c)}catch{}return o(s.toString())}r.exports=n}}),Ut=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/lib/parse.js"(e,r){"use strict";var t=(0,w.__require)("path"),o=Gt(),n=Vt(),i=Kt(),l=process.platform==="win32",s=/\.(?:com|exe)$/i,c=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function u(p){p.file=o(p);let m=p.file&&i(p.file);return m?(p.args.unshift(p.file),p.command=m,o(p)):p.file}function a(p){if(!l)return p;let m=u(p),f=!s.test(m);if(p.options.forceShell||f){let _=c.test(m);p.command=t.normalize(p.command),p.command=n.command(p.command),p.args=p.args.map(D=>n.argument(D,_));let O=[p.command].concat(p.args).join(" ");p.args=["/d","/s","/c",`"${O}"`],p.command=process.env.comspec||"cmd.exe",p.options.windowsVerbatimArguments=!0}return p}function d(p,m,f){m&&!Array.isArray(m)&&(f=m,m=null),m=m?m.slice(0):[],f=Object.assign({},f);let _={command:p,args:m,options:f,file:void 0,original:{command:p,args:m}};return f.shell?_:a(_)}r.exports=d}}),Wt=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/lib/enoent.js"(e,r){"use strict";var t=process.platform==="win32";function o(s,c){return Object.assign(new Error(`${c} ${s.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${c} ${s.command}`,path:s.command,spawnargs:s.args})}function n(s,c){if(!t)return;let u=s.emit;s.emit=function(a,d){if(a==="exit"){let p=i(d,c);if(p)return u.call(s,"error",p)}return u.apply(s,arguments)}}function i(s,c){return t&&s===1&&!c.file?o(c.original,"spawn"):null}function l(s,c){return t&&s===1&&!c.file?o(c.original,"spawnSync"):null}r.exports={hookChildProcess:n,verifyENOENT:i,verifyENOENTSync:l,notFoundError:o}}}),Ht=(0,w.__commonJS)({"../../node_modules/.pnpm/cross-spawn@7.0.6/node_modules/cross-spawn/index.js"(e,r){"use strict";var t=(0,w.__require)("child_process"),o=Ut(),n=Wt();function i(s,c,u){let a=o(s,c,u),d=t.spawn(a.command,a.args,a.options);return n.hookChildProcess(d,a),d}function l(s,c,u){let a=o(s,c,u),d=t.spawnSync(a.command,a.args,a.options);return d.error=d.error||n.verifyENOENTSync(d.status,a),d}r.exports=i,r.exports.spawn=i,r.exports.sync=l,r.exports._parse=o,r.exports._enoent=n}}),zt=(0,w.__toESM)(Ht()),oe,qe,Ae,Be,Fe=!0;typeof process<"u"&&({FORCE_COLOR:oe,NODE_DISABLE_COLORS:qe,NO_COLOR:Ae,TERM:Be}=process.env||{},Fe=process.stdout&&process.stdout.isTTY);var Xt={enabled:!qe&&Ae==null&&Be!=="dumb"&&(oe!=null&&oe!=="0"||Fe)};function b(e,r){let t=new RegExp(`\\x1b\\[${r}m`,"g"),o=`\x1B[${e}m`,n=`\x1B[${r}m`;return function(i){return!Xt.enabled||i==null?i:o+(~(""+i).indexOf(n)?i.replace(t,n+o):i)+n}}var Gn=b(0,0),Qt=b(1,22),Vn=b(2,22),Jn=b(3,23),Yn=b(4,24),Kn=b(7,27),Un=b(8,28),Wn=b(9,29),Hn=b(30,39),zn=b(31,39),Xn=b(32,39),Qn=b(33,39),Zn=b(34,39),eo=b(35,39),ro=b(36,39),to=b(37,39),no=b(90,39),oo=b(90,39),so=b(40,49),io=b(41,49),ao=b(42,49),co=b(43,49),lo=b(44,49),uo=b(45,49),po=b(46,49),fo=b(47,49),ne=(0,It.Debug)("prisma:GeneratorProcess"),Zt=1,F=class extends Error{constructor(e,r,t){super(e),this.code=r,this.data=t,t?.stack&&(this.stack=t.stack)}name="GeneratorError"},en=class{constructor(e,{isNode:r=!1}={}){this.pathOrCommand=e,this.isNode=r}child;handlers={};initPromise;isNode;errorLogs="";pendingError;exited=!1;async init(){return this.initPromise||(this.initPromise=this.initSingleton()),this.initPromise}initSingleton(){return new Promise((e,r)=>{this.isNode?this.child=(0,Rt.fork)(this.pathOrCommand,[],{stdio:["pipe","inherit","pipe","ipc"],env:{...process.env,PRISMA_GENERATOR_INVOCATION:"true"},execArgv:["--max-old-space-size=8096"]}):this.child=(0,zt.spawn)(this.pathOrCommand,{stdio:["pipe","inherit","pipe"],env:{...process.env,PRISMA_GENERATOR_INVOCATION:"true"},shell:!0}),this.child.on("exit",(t,o)=>{if(ne(`child exited with code ${t} on signal ${o}`),this.exited=!0,t){let n=new F(`Generator ${JSON.stringify(this.pathOrCommand)} failed:

${this.errorLogs}`);this.pendingError=n,this.rejectAllHandlers(n)}}),this.child.stdin.on("error",()=>{}),this.child.on("error",t=>{ne(t),this.pendingError=t,t.code==="EACCES"?r(new Error(`The executable at ${this.pathOrCommand} lacks the right permissions. Please use ${Qt(`chmod +x ${this.pathOrCommand}`)}`)):r(t),this.rejectAllHandlers(t)}),(0,kt.byline)(this.child.stderr).on("data",t=>{let o=String(t),n;try{n=JSON.parse(o)}catch{this.errorLogs+=o+`
`,ne(o)}n&&this.handleResponse(n)}),this.child.on("spawn",e)})}rejectAllHandlers(e){for(let r of Object.keys(this.handlers))this.handlers[r].reject(e),delete this.handlers[r]}handleResponse(e){if(e.jsonrpc&&e.id){if(typeof e.id!="number")throw new Error(`message.id has to be a number. Found value ${e.id}`);if(this.handlers[e.id]){if((0,Tt.isErrorResponse)(e)){let r=new F(e.error.message,e.error.code,e.error.data);this.handlers[e.id].reject(r)}else this.handlers[e.id].resolve(e.result);delete this.handlers[e.id]}}}sendMessage(e,r){if(!this.child){r(new F("Generator process has not started yet"));return}if(!this.child.stdin.writable){r(new F("Cannot send data to the generator process, process already exited"));return}this.child.stdin.write(JSON.stringify(e)+`
`,t=>{if(!t||t.code==="EPIPE")return r();r(t)})}getMessageId(){return Zt++}stop(){if(this.child&&!this.child?.killed){this.child.kill("SIGTERM");let e=2e3,r=200,t,o;Promise.race([new Promise(n=>{o=setTimeout(n,e)}),new Promise(n=>{t=setInterval(()=>{if(this.exited)return n("exited")},r)})]).then(n=>{n!=="exited"&&this.child?.kill("SIGKILL")}).finally(()=>{clearInterval(t),clearTimeout(o)})}}rpcMethod(e,r=t=>t){return t=>new Promise((o,n)=>{if(this.pendingError){n(this.pendingError);return}let i=this.getMessageId();this.handlers[i]={resolve:l=>o(r(l)),reject:n},this.sendMessage({jsonrpc:"2.0",method:e,params:t,id:i},l=>{l&&n(l)})})}getManifest=this.rpcMethod("getManifest",e=>e.manifest??null);generate=this.rpcMethod("generate")}});var Ke=M((_o,Ye)=>{"use strict";var ie=Object.defineProperty,rn=Object.getOwnPropertyDescriptor,tn=Object.getOwnPropertyNames,nn=Object.prototype.hasOwnProperty,on=(e,r)=>{for(var t in r)ie(e,t,{get:r[t],enumerable:!0})},sn=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of tn(r))!nn.call(e,n)&&n!==t&&ie(e,n,{get:()=>r[n],enumerable:!(o=rn(r,n))||o.enumerable});return e},an=e=>sn(ie({},"__esModule",{value:!0}),e),Je={};on(Je,{generatorHandler:()=>ln});Ye.exports=an(Je);var cn=Y();function ln(e){(0,cn.byline)(process.stdin).on("data",async r=>{let t=JSON.parse(String(r));if(t.method==="generate"&&t.params)try{let o=await e.onGenerate(t.params);G({jsonrpc:"2.0",result:o,id:t.id})}catch(o){let n=o;G({jsonrpc:"2.0",error:{code:-32e3,message:n.message,data:{stack:n.stack}},id:t.id})}if(t.method==="getManifest")if(e.onManifest)try{let o=await e.onManifest(t.params);G({jsonrpc:"2.0",result:{manifest:o},id:t.id})}catch(o){let n=o;G({jsonrpc:"2.0",error:{code:-32e3,message:n.message,data:{stack:n.stack}},id:t.id})}else G({jsonrpc:"2.0",result:{manifest:null},id:t.id})}),process.stdin.resume()}function G(e){process.stderr.write(JSON.stringify(e)+`
`)}});var ze=M((Eo,He)=>{"use strict";var ae=Object.defineProperty,un=Object.getOwnPropertyDescriptor,pn=Object.getOwnPropertyNames,dn=Object.prototype.hasOwnProperty,fn=(e,r)=>{for(var t in r)ae(e,t,{get:r[t],enumerable:!0})},mn=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of pn(r))!dn.call(e,n)&&n!==t&&ae(e,n,{get:()=>r[n],enumerable:!(o=un(r,n))||o.enumerable});return e},hn=e=>mn(ae({},"__esModule",{value:!0}),e),We={};fn(We,{GeneratorError:()=>Ue.GeneratorError,GeneratorProcess:()=>Ue.GeneratorProcess,generatorHandler:()=>gn.generatorHandler});He.exports=hn(We);var Ue=Ve(),gn=Ke(),vo=Y(),yo=z(),bo=Q()});var Xe=M((wo,_n)=>{_n.exports={name:"dotenv",version:"16.6.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var tr=M((Oo,k)=>{"use strict";var ce=P("fs"),K=P("path"),vn=P("os"),yn=P("crypto"),bn=Xe(),le=bn.version,En=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function wn(e){let r={},t=e.toString();t=t.replace(/\r\n?/mg,`
`);let o;for(;(o=En.exec(t))!=null;){let n=o[1],i=o[2]||"";i=i.trim();let l=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),l==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),r[n]=i}return r}function On(e){e=e||{};let r=rr(e);e.path=r;let t=j.configDotenv(e);if(!t.parsed){let l=new Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw l.code="MISSING_DATA",l}let o=er(e).split(","),n=o.length,i;for(let l=0;l<n;l++)try{let s=o[l].trim(),c=Sn(t,s);i=j.decrypt(c.ciphertext,c.key);break}catch(s){if(l+1>=n)throw s}return j.parse(i)}function xn(e){console.log(`[dotenv@${le}][WARN] ${e}`)}function V(e){console.log(`[dotenv@${le}][DEBUG] ${e}`)}function Ze(e){console.log(`[dotenv@${le}] ${e}`)}function er(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function Sn(e,r){let t;try{t=new URL(r)}catch(s){if(s.code==="ERR_INVALID_URL"){let c=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw c.code="INVALID_DOTENV_KEY",c}throw s}let o=t.password;if(!o){let s=new Error("INVALID_DOTENV_KEY: Missing key part");throw s.code="INVALID_DOTENV_KEY",s}let n=t.searchParams.get("environment");if(!n){let s=new Error("INVALID_DOTENV_KEY: Missing environment part");throw s.code="INVALID_DOTENV_KEY",s}let i=`DOTENV_VAULT_${n.toUpperCase()}`,l=e.parsed[i];if(!l){let s=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw s.code="NOT_FOUND_DOTENV_ENVIRONMENT",s}return{ciphertext:l,key:o}}function rr(e){let r=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(let t of e.path)ce.existsSync(t)&&(r=t.endsWith(".vault")?t:`${t}.vault`);else r=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else r=K.resolve(process.cwd(),".env.vault");return ce.existsSync(r)?r:null}function Qe(e){return e[0]==="~"?K.join(vn.homedir(),e.slice(1)):e}function Pn(e){let r=!!(e&&e.debug),t=e&&"quiet"in e?e.quiet:!0;(r||!t)&&Ze("Loading env from encrypted .env.vault");let o=j._parseVault(e),n=process.env;return e&&e.processEnv!=null&&(n=e.processEnv),j.populate(n,o,e),{parsed:o}}function jn(e){let r=K.resolve(process.cwd(),".env"),t="utf8",o=!!(e&&e.debug),n=e&&"quiet"in e?e.quiet:!0;e&&e.encoding?t=e.encoding:o&&V("No encoding is specified. UTF-8 is used by default");let i=[r];if(e&&e.path)if(!Array.isArray(e.path))i=[Qe(e.path)];else{i=[];for(let u of e.path)i.push(Qe(u))}let l,s={};for(let u of i)try{let a=j.parse(ce.readFileSync(u,{encoding:t}));j.populate(s,a,e)}catch(a){o&&V(`Failed to load ${u} ${a.message}`),l=a}let c=process.env;if(e&&e.processEnv!=null&&(c=e.processEnv),j.populate(c,s,e),o||!n){let u=Object.keys(s).length,a=[];for(let d of i)try{let p=K.relative(process.cwd(),d);a.push(p)}catch(p){o&&V(`Failed to load ${d} ${p.message}`),l=p}Ze(`injecting env (${u}) from ${a.join(",")}`)}return l?{parsed:s,error:l}:{parsed:s}}function Dn(e){if(er(e).length===0)return j.configDotenv(e);let r=rr(e);return r?j._configVault(e):(xn(`You set DOTENV_KEY but you are missing a .env.vault file at ${r}. Did you forget to build it?`),j.configDotenv(e))}function Nn(e,r){let t=Buffer.from(r.slice(-64),"hex"),o=Buffer.from(e,"base64"),n=o.subarray(0,12),i=o.subarray(-16);o=o.subarray(12,-16);try{let l=yn.createDecipheriv("aes-256-gcm",t,n);return l.setAuthTag(i),`${l.update(o)}${l.final()}`}catch(l){let s=l instanceof RangeError,c=l.message==="Invalid key length",u=l.message==="Unsupported state or unable to authenticate data";if(s||c){let a=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw a.code="INVALID_DOTENV_KEY",a}else if(u){let a=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw a.code="DECRYPTION_FAILED",a}else throw l}}function $n(e,r,t={}){let o=!!(t&&t.debug),n=!!(t&&t.override);if(typeof r!="object"){let i=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw i.code="OBJECT_REQUIRED",i}for(let i of Object.keys(r))Object.prototype.hasOwnProperty.call(e,i)?(n===!0&&(e[i]=r[i]),o&&V(n===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):e[i]=r[i]}var j={configDotenv:jn,_configVault:Pn,_parseVault:On,config:Dn,decrypt:Nn,parse:wn,populate:$n};k.exports.configDotenv=j.configDotenv;k.exports._configVault=j._configVault;k.exports._parseVault=j._parseVault;k.exports.config=j.config;k.exports.decrypt=j.decrypt;k.exports.parse=j.parse;k.exports.populate=j.populate;k.exports=j});var ir=L(ze());var x=L(P("path")),q=L(P("child_process")),$=L(P("fs")),U=L(P("os")),nr=L(tr());nr.config();function Cn(e){let r=e.indexOf('"datamodel"'),t=e.indexOf("{",r),o=0,n=t;for(;n<e.length;){let i=e[n++];if(i==="{")o++;else if(i==="}"&&(o--,o===0))break}return e.slice(t,n)}async function Mn(e,r,t){let o=x.resolve(x.join(t,"schema.prisma"));$.default.writeFileSync(o,r);let n=await new Promise((i,l)=>{let s=q.exec(`"${e}" --datamodel-path="${o}" cli dmmf`),c="";s.stderr?.on("data",u=>{u.includes("error:")&&l(u.slice(u.indexOf("error:"),u.indexOf("\\n")))}),s.stdout?.on("data",u=>{c+=u}),s.on("exit",()=>{i(c)})});return Cn(n)}function kn(e,r){let{tableOnly:t=!1,ignoreEnums:o=!1,includeRelationFromFields:n=!1,disableEmoji:i=!1}=r??{},l="erDiagram",s=e.models.concat(e.types),c=t||o?"":e.enums.map(m=>`
        ${m.dbName||m.name} {
            ${m.values.map(f=>`${f.name||f.dbName} ${f.dbName||f.name}`).join(`
`)}
        }
    `).join(`

`),u=i?'"PK"':'"\u{1F5DD}\uFE0F"',a=i?'"nullable"':'"\u2753"',d=s.map(m=>`  "${m.dbName||m.name}" {
${t?"":m.fields.filter(Tn(m,n)).map(f=>`    ${f.type.trimStart()} ${f.name.replace(/^_/,"z_")} ${f.isId||m.primaryKey?.fields?.includes(f.name)?u:""}${f.isRequired?"":a}`).join(`
`)}
    }
  `).join(`

`),p="";for(let m of s)for(let f of m.fields){let _=f.kind==="enum";if(_&&(t||o))continue;let O=`${_?"enum:":""}${f.name}`,D=`"${m.dbName||m.name}"`,N=`"${s.find(h=>h.name===f.type)?.dbName||f.type}"`;if(f.relationFromFields&&f.relationFromFields.length>0||_){let h="||";f.isList?h="}o":f.isRequired||(h="|o");let v=s.find(g=>g.name===N),E=v?.fields.find(({relationName:g})=>g===f.relationName),S=h;E?.isList?h="o{":E?.isRequired||(h="o|"),p+=`    ${D} ${h}--${S} ${v?.dbName||N} : "${O}"
`}else if(s.find(h=>h.name===f.type||h.dbName===f.type)&&f.relationFromFields?.length===0){let h=s.find(v=>v.name===f.type||v.dbName===f.type);if(h){let v=s.indexOf(m),E=s.indexOf(h);v<E&&(p+=`    ${D} o{--}o ${N} : ""
`)}}else if(f.kind==="object"){let h=e.types.find(v=>v.name.replace(/^_/,"z_").replace(/\s/g,""));if(console.log(N,h),h){let v="||";f.isList?v="}o":f.isRequired||(v="|o");let E=h?.fields.find(({relationName:g})=>g===f.relationName),S=v;E?.isList?v="o{":E?.isRequired||(v="o|"),p+=`    ${D} ${v}--${S} ${h.dbName||N} : "${O}"
`}}}return`${l}
${c}
${d}
${p}`}var Tn=(e,r)=>t=>r?t.kind!=="object":t.kind!=="object"&&!e.fields.find(({relationFromFields:o})=>o?.includes(t.name)),Rn=(e,r)=>{let t=r?.split(`
`).filter(o=>o.includes("@map")||o.includes("model ")).map(o=>o.trim());return e.map(o=>({...o,fields:o.fields.map(n=>{let i="None",l=t.filter(s=>(i==="Match"&&s.includes("model ")&&(i="End"),i==="None"&&s.includes(`model ${o.name} `)&&(i="Match"),i==="Match")).find(s=>s.includes(`${n.name} `)&&s.includes("@map"));if(l){let c=new RegExp(/@map\(\"(.*?)\"\)/,"g").exec(l);if(c?.[1]){let u=c[1].replace(/^_/,"z_").replace(/\s/g,"");n.name=u}}return n})}))},or=async e=>{try{let r=e.generator.output?.value||"./prisma/ERD.svg",t=e.generator.config,o=t.theme??"forest",n=x.resolve(x.join(t.mmdcPath||"node_modules/.bin","mmdc")),i=t.tableOnly==="true",l=t.disableEmoji==="true",s=t.ignoreEnums==="true",c=t.includeRelationFromFields==="true",u=process.env.DISABLE_ERD==="true"||t.disabled==="true",a=t.erdDebug==="true"||!!process.env.ERD_DEBUG;if(a&&(console.log("debug mode enabled"),console.log("config",t)),u)return console.log("ERD generator is disabled");let d=Object.values(e.binaryPaths?.queryEngine||{});if(!d[0])throw new Error("no query engine found");let p=d[0],m=$.default.mkdtempSync(`${U.default.tmpdir()+x.sep}prisma-erd-`),f=await Mn(p,e.datamodel,m);if(!f)throw new Error("could not parse datamodel");if(a&&f){$.default.mkdirSync(x.resolve("prisma/debug"),{recursive:!0});let g=x.resolve("prisma/debug/1-datamodel.json");$.default.writeFileSync(g,f),console.log(`data model written to ${g}`)}let _=JSON.parse(f);if(_.models=Rn(_.models,e.datamodel),_.types||(_.types=[]),a&&_.models){let g=x.resolve("prisma/debug/2-datamodel-map-applied.json");$.default.writeFileSync(g,JSON.stringify(_,null,2)),console.log(`applied @map to fields written to ${g}`)}let O=kn(_,{tableOnly:i,ignoreEnums:s,includeRelationFromFields:c,disableEmoji:l});if(a&&O){let g=x.resolve("prisma/debug/3-mermaid.mmd");$.default.writeFileSync(g,O),console.log(`mermaid written to ${g}`)}if(!O)throw new Error("failed to construct mermaid instance from dml");if(r.endsWith(".md"))return $.default.writeFileSync(r,`\`\`\`mermaid
${O}\`\`\`
`);let D=x.resolve(x.join(m,"prisma.mmd"));$.default.writeFileSync(D,O);let N={deterministicIds:!0,maxTextSize:9e4,er:{useMaxWidth:!0},theme:o},h=N;if(t?.mermaidConfig){let g=await import(x.resolve(t.mermaidConfig));a&&console.log("imported mermaid config: ",g),h={...N,...g}}let v=x.resolve(x.join(m,"config.json"));$.default.writeFileSync(v,JSON.stringify(h));let E=t.puppeteerConfig;if(E&&!$.default.existsSync(E))throw new Error(`Puppeteer config file "${E}" does not exist`);if(!E){let g=x.resolve(x.join(m,"puppeteerConfig.json")),C,R={logLevel:a?"warn":"error",executablePath:C};if(U.default.platform()==="darwin"&&U.default.arch()==="arm64")try{let I=q.execSync("which chromium").toString().replace(`
`,"");if(!I)throw new Error("Could not find chromium executable. Refer to https://github.com/keonik/prisma-erd-generator#issues for next steps.");R.executablePath=I,R.args=["--no-sandbox"]}catch(I){console.error(I),console.log(`
Prisma ERD Generator: Unable to find chromium path for you MacOS arm64 machine. Attempting to use the default at ${C}. To learn more visit https://github.com/keonik/prisma-erd-generator#-arm64-users-
`),C="/usr/bin/chromium-browser"}$.default.writeFileSync(g,JSON.stringify(R)),E=g}if(t.mmdcPath){if(!$.default.existsSync(n))throw new Error(`
Mermaid CLI provided path does not exist. 
${n}`)}else if(!$.default.existsSync(n)){let g=q.execSync("find ../.. -name mmdc").toString().split(`
`).filter(C=>C).pop();if(!g||!$.default.existsSync(g))throw new Error(`Expected mermaid CLI at 
${n}

or
${g}
 but this package was not found.`);n=x.resolve(g)}let S=`"${n}" -i "${D}" -o "${r}" -c "${v}" -p "${E}"`;if(a&&S&&console.log("mermaid command: ",S),q.execSync(S),!$.default.existsSync(r))throw new Error(`Issue generating ER Diagram. Expected ${r} to be created`)}catch(r){throw console.error(r),r}};var ar=P("fs"),sr=process.env.DISABLE_ERD==="true",ue;try{ue=JSON.parse((0,ar.readFileSync)("package.json","utf-8"))}catch(e){console.error(e),ue={version:"1.0.0"}}(0,ir.generatorHandler)({onManifest:()=>({defaultOutput:sr?"N/A":"ERD.svg",prettyName:sr?"No ERD":"Entity-relationship-diagram",requiresEngines:["queryEngine"],version:ue?.version}),onGenerate:or});})();
